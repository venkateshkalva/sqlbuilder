<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Start Stop Timer</title>
</head>
<body>
  <h1 id="timer">00:00:00</h1>
  <button id="startStopBtn">Start</button>
  <button id="resetBtn">Reset</button>

  <script>
    let timerInterval;
let startTime;
let elapsedTime = 0;
let isRunning = false;

// Load the timer state from localStorage when the page loads
window.addEventListener('load', () => {
  const savedStartTime = localStorage.getItem('startTime');
  const savedElapsedTime = localStorage.getItem('elapsedTime');
  if (savedStartTime) {
    startTime = parseInt(savedStartTime);
    if (localStorage.getItem('isRunning') === 'true') {
      isRunning = true;
      elapsedTime = savedElapsedTime ? parseInt(savedElapsedTime) : 0;
      startTimer();
    } else {
      elapsedTime = savedElapsedTime ? parseInt(savedElapsedTime) : 0;
      updateTime();
    }
  }
});

function startStopTimer() {
  if (!isRunning) {
    startTimer();
  } else {
    stopTimer();
  }
}

function startTimer() {
  startTime = Date.now() - elapsedTime;
  localStorage.setItem('startTime', startTime);
  timerInterval = setInterval(updateTime, 1000);
  document.getElementById("startStopBtn").textContent = "Stop";
  isRunning = true;
  localStorage.setItem('isRunning', 'true');
}

function stopTimer() {
  clearInterval(timerInterval);
  document.getElementById("startStopBtn").textContent = "Start";
  isRunning = false;
  localStorage.setItem('isRunning', 'false');
  localStorage.setItem('elapsedTime', elapsedTime);
}

function updateTime() {
  if (isRunning) {
    elapsedTime = Date.now() - startTime;
    localStorage.setItem('elapsedTime', elapsedTime);
  }
  
  const elapsedTimeInSeconds = Math.floor(elapsedTime / 1000);
  const hours = Math.floor(elapsedTimeInSeconds / 3600);
  const minutes = Math.floor((elapsedTimeInSeconds % 3600) / 60);
  const seconds = elapsedTimeInSeconds % 60;
  document.getElementById("timer").textContent = `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
}

function resetTimer() {
  clearInterval(timerInterval);
  isRunning = false;
  elapsedTime = 0;
  localStorage.removeItem('startTime');
  localStorage.removeItem('elapsedTime');
  document.getElementById("timer").textContent = "00:00:00";
  document.getElementById("startStopBtn").textContent = "Start";
}

document.getElementById("startStopBtn").addEventListener("click", startStopTimer);
document.getElementById("resetBtn").addEventListener("click", resetTimer);

// Save timer state when window is closed or refreshed
window.addEventListener('beforeunload', () => {
  if (isRunning) {
    elapsedTime = Date.now() - startTime;
    localStorage.setItem('elapsedTime', elapsedTime);
  }
});



  </script>
</body>
</html>
